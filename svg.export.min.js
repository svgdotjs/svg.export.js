// svg.export.js 0.13 - Copyright (c) 2014 Wout Fierens - Licensed under the MIT license
;(function(){function e(e,t,n){if(t){var r="",s=t===true?"  ":t||"";for(i=n-1;i>=0;i--)r+=s;e=r+e+"\n"}return e}SVG.extend(SVG.Element,{exportSvg:function(t,n){var r,i,s,o,u=this.node.nodeName,a="";t=t||{};if(t.exclude==null||!t.exclude.call(this)){t=t||{};n=n||0;if(this instanceof SVG.Doc){a+=e('<?xml version="1.0" encoding="UTF-8"?>',t.whitespace,n);s=this.attr("width");o=this.attr("height");if(t.width)this.attr("width",t.width);if(t.height)this.attr("height",t.height)}a+=e("<"+u+this.attrToString()+">",t.whitespace,n);if(this instanceof SVG.Doc){this.attr({width:s,height:o});a+=e("<desc>Created with svg.js [http://svgjs.com]</desc>",t.whitespace,n+1)}if(this instanceof SVG.Parent){for(r=0,i=this.children().length;r<i;r++)a+=this.children()[r].exportSvg(t,n+1)}else if(this instanceof SVG.Text){this.lines.each(function(){a+=this.exportSvg(t,n+1)})}else if(this instanceof SVG.ComponentTransferEffect){this.rgb.each(function(){a+=this.exportSvg(t,n+1)})}if(this instanceof SVG.TSpan)a+=e(this.node.firstChild.nodeValue.replace(/&/g,"&"),t.whitespace,n+1);a+=e("</"+u+">",t.whitespace,n)}return a},exportAttr:function(e){if(arguments.length==0)return this.data("svg-export-attr");return this.data("svg-export-attr",e)},attrToString:function(){var e,t,n,r=[],i=this.exportAttr(),s=this.attr();if(typeof i=="object")for(t in i)if(t!="data-svg-export-attr")s[t]=i[t];for(t in s){n=s[t];if(t=="xlink"){t="xmlns:xlink"}else if(t=="href"){if(!s["xlink:href"])t="xlink:href"}if(typeof n==="string")n=n.replace(/"/g,"'");if(t!="data-svg-export-attr"&&t!="href"){if(t!="stroke"||parseFloat(s["stroke-width"])>0)r.push(t+'="'+n+'"')}}return r.length?" "+r.join(" "):""}})}).call(this);